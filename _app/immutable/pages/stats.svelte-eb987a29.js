import{U as ot,S as lt,i as at,s as rt,e as g,t as H,k,c as b,a as E,h as P,d as i,m as D,b as T,g as C,H as r,j as O,l as Q,V as nt,E as W,J as ct,w as it,P as ht,x as pt,y as dt,q as ft,o as ut,B as vt}from"../chunks/index-79298705.js";import{p as _t}from"../chunks/stores-bf5e93be.js";import{r as mt}from"../chunks/index-bc90cce2.js";const gt=mt([],c=>{{const s=e=>{const n=new URL("/api/metrics",e.origin),a=e.searchParams.get("limit"),p=e.searchParams.get("secret");p&&(n.searchParams.append("secret",p),a&&n.searchParams.append("limit",a)),fetch(n).then(d=>d.json()).then(d=>{const w=d.metrics;w.reverse(),w.forEach(f=>{f.entries.sort((u,o)=>u.count<o.count?1:u.count>o.count?-1:0)}),c(w)}).catch(d=>{console.error(d),c([])})},l=ot(_t).url;s(l);const t=setInterval(()=>{s(l)},6e4);return()=>clearInterval(t)}});function X(c,s,l){const t=c.slice();return t[1]=s[l],t}function Z(c,s,l){const t=c.slice();return t[4]=s[l],t}function tt(c){let s,l,t=c[4].path+"",e,n,a,p=c[4].status+"",d,w,f,u=c[4].count+"",o,y;return{c(){s=g("tr"),l=g("td"),e=H(t),n=k(),a=g("td"),d=H(p),w=k(),f=g("td"),o=H(u),y=k(),this.h()},l(v){s=b(v,"TR",{class:!0});var _=E(s);l=b(_,"TD",{class:!0});var $=E(l);e=P($,t),$.forEach(i),n=D(_),a=b(_,"TD",{class:!0});var B=E(a);d=P(B,p),B.forEach(i),w=D(_),f=b(_,"TD",{class:!0});var R=E(f);o=P(R,u),R.forEach(i),y=D(_),_.forEach(i),this.h()},h(){T(l,"class","svelte-132p95t"),T(a,"class","row-status svelte-132p95t"),T(f,"class","row-hits svelte-132p95t"),T(s,"class","svelte-132p95t")},m(v,_){C(v,s,_),r(s,l),r(l,e),r(s,n),r(s,a),r(a,d),r(s,w),r(s,f),r(f,o),r(s,y)},p(v,_){_&1&&t!==(t=v[4].path+"")&&O(e,t),_&1&&p!==(p=v[4].status+"")&&O(d,p),_&1&&u!==(u=v[4].count+"")&&O(o,u)},d(v){v&&i(s)}}}function et(c){let s=!c[4].path.startsWith("/blog/preview-"),l,t=s&&tt(c);return{c(){t&&t.c(),l=Q()},l(e){t&&t.l(e),l=Q()},m(e,n){t&&t.m(e,n),C(e,l,n)},p(e,n){n&1&&(s=!e[4].path.startsWith("/blog/preview-")),s?t?t.p(e,n):(t=tt(e),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},d(e){t&&t.d(e),e&&i(l)}}}function st(c){let s,l,t,e,n=c[1].start+"",a,p,d=c[1].end+"",w,f,u,o,y,v,_,$,B,R,x,V,j,A,G,M=c[1].entries,S=[];for(let m=0;m<M.length;m+=1)S[m]=et(Z(c,M,m));return{c(){s=g("div"),l=g("table"),t=g("caption"),e=g("h2"),a=H(n),p=H(" \u2013 "),w=H(d),f=k(),u=g("thead"),o=g("tr"),y=g("th"),v=H("Path"),_=k(),$=g("th"),B=H("Status"),R=k(),x=g("th"),V=H("Hits"),j=k(),A=g("tbody");for(let m=0;m<S.length;m+=1)S[m].c();G=k(),this.h()},l(m){s=b(m,"DIV",{class:!0});var I=E(s);l=b(I,"TABLE",{class:!0});var h=E(l);t=b(h,"CAPTION",{class:!0});var N=E(t);e=b(N,"H2",{});var U=E(e);a=P(U,n),p=P(U," \u2013 "),w=P(U,d),U.forEach(i),N.forEach(i),f=D(h),u=b(h,"THEAD",{class:!0});var J=E(u);o=b(J,"TR",{class:!0});var q=E(o);y=b(q,"TH",{class:!0});var Y=E(y);v=P(Y,"Path"),Y.forEach(i),_=D(q),$=b(q,"TH",{class:!0});var z=E($);B=P(z,"Status"),z.forEach(i),R=D(q),x=b(q,"TH",{class:!0});var F=E(x);V=P(F,"Hits"),F.forEach(i),q.forEach(i),J.forEach(i),j=D(h),A=b(h,"TBODY",{class:!0});var K=E(A);for(let L=0;L<S.length;L+=1)S[L].l(K);K.forEach(i),h.forEach(i),G=D(I),I.forEach(i),this.h()},h(){T(t,"class","svelte-132p95t"),T(y,"class","svelte-132p95t"),T($,"class","row-status svelte-132p95t"),T(x,"class","row-hits svelte-132p95t"),T(o,"class","svelte-132p95t"),T(u,"class","svelte-132p95t"),T(A,"class","svelte-132p95t"),T(l,"class","svelte-132p95t"),T(s,"class","day-range svelte-132p95t")},m(m,I){C(m,s,I),r(s,l),r(l,t),r(t,e),r(e,a),r(e,p),r(e,w),r(l,f),r(l,u),r(u,o),r(o,y),r(y,v),r(o,_),r(o,$),r($,B),r(o,R),r(o,x),r(x,V),r(l,j),r(l,A);for(let h=0;h<S.length;h+=1)S[h].m(A,null);r(s,G)},p(m,I){if(I&1&&n!==(n=m[1].start+"")&&O(a,n),I&1&&d!==(d=m[1].end+"")&&O(w,d),I&1){M=m[1].entries;let h;for(h=0;h<M.length;h+=1){const N=Z(m,M,h);S[h]?S[h].p(N,I):(S[h]=et(N),S[h].c(),S[h].m(A,null))}for(;h<S.length;h+=1)S[h].d(1);S.length=M.length}},d(m){m&&i(s),nt(S,m)}}}function bt(c){let s,l=c[0],t=[];for(let e=0;e<l.length;e+=1)t[e]=st(X(c,l,e));return{c(){s=g("section");for(let e=0;e<t.length;e+=1)t[e].c();this.h()},l(e){s=b(e,"SECTION",{id:!0});var n=E(s);for(let a=0;a<t.length;a+=1)t[a].l(n);n.forEach(i),this.h()},h(){T(s,"id","metrics")},m(e,n){C(e,s,n);for(let a=0;a<t.length;a+=1)t[a].m(s,null)},p(e,[n]){if(n&1){l=e[0];let a;for(a=0;a<l.length;a+=1){const p=X(e,l,a);t[a]?t[a].p(p,n):(t[a]=st(p),t[a].c(),t[a].m(s,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=l.length}},i:W,o:W,d(e){e&&i(s),nt(t,e)}}}function Et(c,s,l){let t;return ct(c,gt,e=>l(0,t=e)),[t]}class Tt extends lt{constructor(s){super(),at(this,s,Et,bt,rt,{})}}function wt(c){let s,l,t,e,n,a,p,d,w,f,u;return f=new Tt({}),{c(){s=g("meta"),l=k(),t=g("div"),e=g("h1"),n=H("Statistics"),a=k(),p=g("p"),d=H("Below are statistics about HTTP GET responses from the past 30 days."),w=k(),it(f.$$.fragment),this.h()},l(o){const y=ht('[data-svelte="svelte-1gm69sh"]',document.head);s=b(y,"META",{name:!0,content:!0}),y.forEach(i),l=D(o),t=b(o,"DIV",{class:!0});var v=E(t);e=b(v,"H1",{});var _=E(e);n=P(_,"Statistics"),_.forEach(i),a=D(v),p=b(v,"P",{});var $=E(p);d=P($,"Below are statistics about HTTP GET responses from the past 30 days."),$.forEach(i),w=D(v),pt(f.$$.fragment,v),v.forEach(i),this.h()},h(){document.title="Site Statistics | Timo Tiuraniemi",T(s,"name","description"),T(s,"content","Site Statistics"),T(t,"class","content")},m(o,y){r(document.head,s),C(o,l,y),C(o,t,y),r(t,e),r(e,n),r(t,a),r(t,p),r(p,d),r(t,w),dt(f,t,null),u=!0},p:W,i(o){u||(ft(f.$$.fragment,o),u=!0)},o(o){ut(f.$$.fragment,o),u=!1},d(o){i(s),o&&i(l),o&&i(t),vt(f)}}}class Ht extends lt{constructor(s){super(),at(this,s,null,wt,rt,{})}}export{Ht as default};
